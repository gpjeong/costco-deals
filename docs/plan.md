# 🛒 코스트코 주간 할인 뷰어 - 프로젝트 기획서

## 프로젝트 개요

어머니가 코스트코 방문 전 주간 할인 내역을 쉽게 확인할 수 있는 웹 페이지.
모바일/PC 모두 지원하며, 코스트코 코리아 공식 사이트에서 데이터를 크롤링하고 수동 보정 가능.

---

## 1. 기술 스택 (추천)

| 영역 | 기술 | 이유 |
|------|------|------|
| **프레임워크** | Next.js (App Router) | Vercel 최적화, SSG로 빠른 로딩 |
| **스타일링** | Tailwind CSS | 반응형 빠르게 구현 |
| **데이터 저장** | JSON 파일 (MVP) → 추후 Supabase 고려 | DB 없이 시작, 무료 호스팅 유지 |
| **크롤러** | Python (BeautifulSoup/Playwright) 또는 Node.js (Puppeteer) | 코스트코 사이트가 동적 렌더링일 수 있어 Playwright/Puppeteer 권장 |
| **배포** | Vercel | Next.js와 궁합 최고, 무료 플랜 충분 |
| **자동화** | GitHub Actions (주 1회 크롤링) | 무료, cron 스케줄링 가능 |

---

## 2. 데이터 모델

### 크롤링 소스
- **1순위**: 코스트코 코리아 공식 (`costco.co.kr/Special-Price-Offers/c/SpecialPriceOffers`)
- **참고**: costbest.co.kr의 데이터 구조를 참고하여 필드 설계

### 상품 데이터 스키마 (JSON)

```json
{
  "weekId": "2026-W07",
  "startDate": "2026-02-09",
  "endDate": "2026-02-15",
  "scrapedAt": "2026-02-09T10:00:00+09:00",
  "products": [
    {
      "id": "603724",
      "name": "CJ 유기농 맛밤 42G X 17PK",
      "category": "간식류",
      "originalPrice": 16490,
      "discountAmount": 3500,
      "discountRate": 21,
      "salePrice": 12990,
      "startDate": "2026-02-09",
      "endDate": "2026-02-15",
      "imageUrl": "https://...",
      "tags": ["인기상품"],
      "isManuallyEdited": false,
      "notes": ""
    }
  ]
}
```

### 카테고리 목록
식료품, 간식류, 음료/세제/애견용품, 주류, 건강기능식품, 미용, 생활용품, 아웃도어, 의류/패션, 가전, 가구/침구류

---

## 3. UI/UX 설계

### 디자인 원칙
- **대상**: 50~60대 어머니 → 큰 글씨, 단순한 네비게이션, 직관적 구조
- **톤**: 깔끔하고 따뜻한 느낌 (화이트 배경 + 코스트코 레드/블루 포인트)
- **핵심 UX**: 열자마자 "이번 주 할인" 바로 보이기

### 페이지 구조

```
┌─────────────────────────────────────────┐
│  🛒 코스트코 이번 주 할인               │
│  2월 9일 (일) ~ 2월 15일 (토)           │
│  [◀ 지난주]              [다음주 ▶]     │
├─────────────────────────────────────────┤
│  카테고리 필터 (가로 스크롤 칩)          │
│  [전체] [식료품] [간식류] [음료] ...     │
├─────────────────────────────────────────┤
│  정렬: [할인율순 ▼]                     │
├─────────────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐            │
│  │  🖼️ 상품  │  │  🖼️ 상품  │            │
│  │ CJ 맛밤   │  │ 초콜릿    │            │
│  │ 16,490원  │  │ 25,990원  │            │
│  │ → 12,990원│  │ → 22,390원│            │
│  │ -21% 🔥   │  │ -14%      │            │
│  │ ~2/15까지 │  │ ~2/15까지 │            │
│  └──────────┘  └──────────┘            │
│  ... (2열 그리드, 모바일은 1~2열)        │
├─────────────────────────────────────────┤
│  📌 즐겨찾기 상품 (로컬스토리지)         │
└─────────────────────────────────────────┘
```

### 모바일 우선 반응형 전략
- **모바일 (< 640px)**: 1~2열 카드 그리드, 하단 고정 카테고리 바
- **태블릿 (640~1024px)**: 2~3열 그리드
- **데스크톱 (> 1024px)**: 3~4열 그리드, 사이드바 카테고리

### 핵심 기능 (MVP - Phase 1~3)
1. **주차별 탐색**: 이전/다음 주 네비게이션
2. **카테고리 필터**: 칩 형태로 빠르게 전환
3. **카테고리별 할인 요약**: 상단에 "간식류 12개, 식료품 8개" 등 한눈에 표시
4. **정렬**: 할인율순, 가격순, 마감임박순, 인기순
5. **검색**: 상품명 검색
6. **즐겨찾기**: 관심 상품 북마크 (로컬스토리지) + 찜 목록 필터
7. **🛒 장바구니 메모**: 살 것 체크리스트 (할인 상품 추가 + 직접 입력)
8. **🌙 다크모드**: 시스템 설정 연동 + 수동 토글

### 추후 기능 (v2)
- **📊 가격 이력**: 과거 주차 데이터 비교, 미니 차트로 가격 추이 표시
- **📅 달력뷰**: 할인 기간을 캘린더에 바 형태로 표시
- **🔥 실시간 인기순위**: 조회수/찜수 기반 인기 상품 랭킹
- **🏪 매장 선택**: 자주 가는 매장 설정 (매장별 재고는 코스트코 API 미제공으로 제한적)

### 추후 기능 (v3)
- **🔔 카카오톡 알림**: 매주 월요일 새 할인 알림 (카카오 알림톡 API 연동)
- PWA (홈화면 추가)
- 수동 데이터 보정용 어드민 페이지

---

## 3-1. 사용자 데이터 저장 전략

### MVP: localStorage (기기별 분리)
각자 자기 폰으로 접속하므로, 별도 로그인 없이 localStorage만으로 사용자 데이터 분리 가능.

| 데이터 | 저장 위치 | key 예시 |
|--------|-----------|----------|
| 찜 목록 | localStorage | `costco-favorites` |
| 장바구니 메모 | localStorage | `costco-cart` |
| 다크모드 설정 | localStorage | `costco-darkmode` |
| 최근 본 카테고리 | localStorage | `costco-last-category` |

**장점**: 구현 간단, 서버 불필요, 무료
**단점**: 브라우저 초기화 시 데이터 소실, 기기 간 동기화 불가

### v2 (필요 시): Supabase 서버 저장
기기 변경이나 데이터 백업이 필요해지면, Supabase (무료 플랜) + 카카오 소셜 로그인 추가.

---

## 4. 크롤러 설계

### 동작 방식
```
GitHub Actions (매주 월요일 09:00 KST)
  → 크롤러 실행 (Playwright)
  → costco.co.kr 스페셜 할인 페이지 크롤링
  → JSON 파일로 저장 (/data/weeks/2026-W07.json)
  → Git commit & push
  → Vercel 자동 재배포 (SSG rebuild)
```

### 크롤러 주의사항
- 코스트코 사이트는 동적 렌더링 가능성 높음 → Playwright/Puppeteer 필요
- robots.txt 확인 필요
- Rate limiting 준수 (1회 크롤링으로 충분)
- 크롤링 실패 시 알림 (GitHub Actions 실패 메일)

### 수동 보정 방식
- `/data/weeks/` 내 JSON 파일을 직접 수정하여 git push
- 추후 간단한 어드민 UI 추가 가능

---

## 5. 프로젝트 구조

```
costco-deals/
├── app/                      # Next.js App Router
│   ├── layout.tsx            # 공통 레이아웃
│   ├── page.tsx              # 메인 페이지 (이번 주 할인)
│   └── week/[weekId]/
│       └── page.tsx          # 특정 주차 페이지
├── components/
│   ├── ProductCard.tsx       # 상품 카드
│   ├── CategoryFilter.tsx    # 카테고리 필터 칩
│   ├── WeekNavigation.tsx    # 주차 이동 네비게이션
│   ├── SortSelector.tsx      # 정렬 드롭다운
│   ├── SearchBar.tsx         # 검색
│   └── FavoriteButton.tsx    # 즐겨찾기 토글
├── data/
│   └── weeks/
│       ├── 2026-W06.json     # 주차별 할인 데이터
│       └── 2026-W07.json
├── lib/
│   ├── types.ts              # TypeScript 타입 정의
│   └── utils.ts              # 유틸리티 함수
├── scraper/
│   ├── scrape.ts             # 크롤러 메인
│   └── parser.ts             # HTML → JSON 파서
├── .github/
│   └── workflows/
│       └── scrape.yml        # 주간 크롤링 자동화
├── public/
├── tailwind.config.ts
├── next.config.ts
└── package.json
```

---

## 6. 개발 단계 (Claude Code 지시용)

### Phase 1: 프로젝트 셋업 + UI 기본 (1일)
- Next.js + Tailwind 프로젝트 초기화
- 샘플 JSON 데이터 작성 (위 스키마 기반)
- 메인 페이지 레이아웃 + ProductCard 컴포넌트
- 반응형 그리드 (모바일 1~2열, 데스크톱 3~4열)

### Phase 2: 필터/정렬/검색 기능 (0.5일)
- 카테고리 필터 칩 구현
- 정렬 기능 (할인율, 가격, 마감임박)
- 검색 기능
- 즐겨찾기 (로컬스토리지)

### Phase 3: 주차 네비게이션 (0.5일)
- 주차별 데이터 로딩
- 이전/다음 주 네비게이션
- 현재 주차 자동 감지

### Phase 4: 크롤러 개발 (1일)
- 코스트코 코리아 사이트 분석
- Playwright 크롤러 작성
- JSON 파서 구현
- 로컬 테스트

### Phase 5: 자동화 + 배포 (0.5일)
- GitHub Actions 워크플로우 작성
- Vercel 배포 설정
- 크롤링 → 커밋 → 자동 배포 파이프라인

---

## 7. Claude Code 프롬프트 (순서대로 실행)

### 프롬프트 1: 프로젝트 초기화
```
Next.js 14+ (App Router) + Tailwind CSS로 "코스트코 주간 할인 뷰어" 프로젝트를 생성해줘.

요구사항:
- TypeScript 사용
- /data/weeks/ 디렉토리에 샘플 JSON 데이터 2주치 생성 (위 스키마 참고)
- 프로젝트 구조는 기획서의 구조를 따라줘
- 타입 정의 먼저 작성 (lib/types.ts)
```

### 프롬프트 2: UI 구현
```
메인 페이지 UI를 구현해줘.

디자인 요구사항:
- 타겟 사용자: 50~60대 어머니 → 큰 글씨(최소 16px), 간결한 UI
- 색상: 화이트 배경, 코스트코 레드(#E31837) + 네이비(#005DAA) 포인트
- 상품 카드: 이미지, 상품명, 원가(취소선), 할인가(빨간 강조), 할인율 배지, 기간
- 반응형: 모바일 1~2열, 태블릿 2~3열, 데스크톱 3~4열
- 카테고리 필터: 가로 스크롤 칩 형태
- 주차 네비게이션: 상단에 [◀ 지난주] 날짜범위 [다음주 ▶]
- 정렬: 할인율순/가격순/마감임박순
- 검색: 상단 검색바
- 즐겨찾기: 카드에 하트 아이콘, 로컬스토리지 저장
```

### 프롬프트 3: 크롤러
```
코스트코 코리아 사이트(costco.co.kr/Special-Price-Offers/c/SpecialPriceOffers)에서
주간 할인 상품을 크롤링하는 스크립트를 작성해줘.

요구사항:
- Playwright 사용 (동적 렌더링 대응)
- 크롤링 결과를 /data/weeks/YYYY-WNN.json 형식으로 저장
- 카테고리, 상품명, 원가, 할인가, 할인율, 기간, 이미지 URL 수집
- 에러 핸들링 + 로깅
- robots.txt 준수
```

### 프롬프트 4: CI/CD
```
GitHub Actions로 매주 월요일 KST 09:00에 크롤러를 실행하고,
결과를 커밋하여 Vercel 자동 재배포가 되도록 워크플로우를 작성해줘.

- .github/workflows/scrape.yml
- 크롤링 실패 시 GitHub Issue 자동 생성
- 수동 실행도 가능하도록 workflow_dispatch 포함
```

---

## 8. 리스크 & 대안

| 리스크 | 대안 |
|--------|------|
| 코스트코 사이트 구조 변경 | 크롤러 실패 감지 → 알림 → 수동 보정 |
| 크롤링 차단 | User-Agent 설정, 요청 간격 조절, 필요시 수동 입력 |
| 동적 렌더링으로 데이터 미노출 | Playwright headless 브라우저로 대응 |
| 이미지 핫링크 차단 | 이미지를 로컬에 저장하거나, 텍스트만 표시 |

---

## 참고 사이트
- 코스트코 코리아 스페셜 할인: https://www.costco.co.kr/Special-Price-Offers/c/SpecialPriceOffers
- 코스트베스트 (데이터 구조 참고): https://costbest.co.kr/
- 코코달인 (기능 참고): https://www.cocodalin.com/
